<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="General description"><meta name="keywords" content="rust, rustlang, rust-lang, massa_ledger_worker"><title>massa_ledger_worker - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../massa_ledger_worker/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../massa_ledger_worker/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate massa_ledger_worker</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#structs">Structs</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../massa_ledger_worker/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">massa_ledger_worker</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/massa_ledger_worker/lib.rs.html#3-59">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="general-description"><a href="#general-description">General description</a></h2>
<p>This crate implements a ledger matching addresses to balances, executable bytecode and data.
It also provides tools to manipulate ledger entries.</p>
<p><code>FinalLedger</code> is used as part of <code>FinalState</code> that represents the latest final state of the node
(see <code>massa-final-state</code> crate for more details).</p>
<p><code>FinalLedger</code> representing a ledger at a given slot that was executed as final
(see the massa-execution-worker crate for details on execution).
Only the execution worker writes into the final ledger.</p>
<h2 id="a-note-on-parallel-vs-sequential-balance"><a href="#a-note-on-parallel-vs-sequential-balance">A note on parallel vs sequential balance</a></h2>
<p>The distinctions between the parallel and the sequential balance of a ledger entry are the following:</p>
<ul>
<li>the parallel balance can be credited or spent in any slot</li>
<li>the sequential balance can be credited in any slot but only spent in slots form the address’ thread</li>
<li>block producers are credited fees from the sequential balance,
and they can ensure that this balance will be available for their block simply
by looking for sequential balance spending within the block’s thread.</li>
</ul>
<h2 id="architecture"><a href="#architecture">Architecture</a></h2><h3 id="ledgerrs"><a href="#ledgerrs"><code>ledger.rs</code></a></h3>
<p>Defines the <code>FinalLedger</code> that matches an address to a <code>LedgerEntry</code> (see <code>ledger_entry.rs</code>),
and can be manipulated using <code>LedgerChanges</code> (see <code>ledger_changes.rs</code>).
The <code>FinalLedger</code> is bootstrapped using tooling available in bootstrap.rs</p>
<h3 id="ledger_entryrs"><a href="#ledger_entryrs"><code>ledger_entry.rs</code></a></h3>
<p>Represents an entry in the ledger for a given address.
It contains balances, executable bytecode and an arbitrary datastore.</p>
<h3 id="ledger_changesrs"><a href="#ledger_changesrs"><code>ledger_changes.rs</code></a></h3>
<p>Represents a list of changes to ledger entries that
can be modified, combined or applied to the final ledger.</p>
<h3 id="bootstraprs"><a href="#bootstraprs"><code>bootstrap.rs</code></a></h3>
<p>Provides serializable structures and tools for bootstrapping the final ledger.</p>
<h3 id="test-exports"><a href="#test-exports">Test exports</a></h3>
<p>When the crate feature <code>testing</code> is enabled, tooling useful for testing purposes is exported.
See <code>test_exports/mod.rs</code> for details.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FinalLedger.html" title="massa_ledger_worker::FinalLedger struct">FinalLedger</a></div><div class="item-right docblock-short"><p>Represents a final ledger associating addresses to their balances, bytecode and data.
The final ledger is part of the final state which is attached to a final slot, can be bootstrapped and allows others to bootstrap.
The ledger size can be very high: it can exceed 1 terabyte.
To allow for storage on disk, the ledger uses trees and has <code>O(log(N))</code> access, insertion and deletion complexity.</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="massa_ledger_worker" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0-nightly (17cbdfd07 2022-09-13)" ></div></body></html>